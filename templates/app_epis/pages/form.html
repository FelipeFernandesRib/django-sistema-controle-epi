{% extends "app_core/partials/base.html" %}
{% load static %}

{% block title %}{% if view.object %}Editar EPI{% else %}Novo EPI{% endif %}{% endblock %}
{% block page_title %}EPIs{% endblock %}
{% block breadcrumb %}
  <a href="{% url 'app_core:home' %}">Início</a> ›
  <a href="{% url 'app_epis:lista' %}">EPIs</a> ›
  {% if view.object %}Editar{% else %}Novo{% endif %}
{% endblock %}

{% block content %}
<div class="card shadow-sm">
  <div class="card-header">
    <h2 class="h5 mb-0">{% if view.object %}Editar EPI{% else %}Novo EPI{% endif %}</h2>
  </div>

  <div class="card-body">
    <form method="post" novalidate>
      {% csrf_token %}
      {{ form.non_field_errors }}

      <div class="row g-3">
        <div class="col-12 col-md-4">
          <label class="form-label">Código</label>
          {{ form.codigo }}
          {% if form.codigo.errors %}<div class="invalid-feedback d-block">{{ form.codigo.errors|join:", " }}</div>{% endif %}
        </div>

        <div class="col-12 col-md-8">
          <label class="form-label">Nome</label>
          {{ form.nome }}
          {% if form.nome.errors %}<div class="invalid-feedback d-block">{{ form.nome.errors|join:", " }}</div>{% endif %}
        </div>

        <div class="col-12 col-md-4">
          <label class="form-label">Categoria</label>
          {{ form.categoria }}
          {% if form.categoria.errors %}<div class="invalid-feedback d-block">{{ form.categoria.errors|join:", " }}</div>{% endif %}
        </div>

        <div class="col-12 col-md-4">
          <label class="form-label">Tamanho</label>
          {{ form.tamanho }}
          {% if form.tamanho.errors %}<div class="invalid-feedback d-block">{{ form.tamanho.errors|join:", " }}</div>{% endif %}
        </div>

        <div class="col-12 col-md-4 d-flex align-items-center">
          <div class="form-check form-switch mt-3 mt-md-0">
            {{ form.ativo }}
            <label class="form-check-label ms-2">Ativo</label>
          </div>
        </div>

        <!-- Estoque -->
        <div class="col-12 col-md-3">
          <label class="form-label">Estoque</label>
          {{ form.estoque }}
          <div class="form-text">Quantidade atual no estoque.</div>
          {% if form.estoque.errors %}<div class="invalid-feedback d-block">{{ form.estoque.errors|join:", " }}</div>{% endif %}
        </div>

        <div class="col-12 col-md-3">
          <label class="form-label">Estoque mínimo</label>
          {{ form.estoque_minimo }}
          <div class="form-text">Defina o mínimo para alerta.</div>
          {% if form.estoque_minimo.errors %}<div class="invalid-feedback d-block">{{ form.estoque_minimo.errors|join:", " }}</div>{% endif %}
        </div>
      </div>

      <div class="d-flex gap-2 mt-4">
        <a class="btn btn-outline-secondary" href="{% url 'app_epis:lista' %}">Cancelar</a>
        <button class="btn btn-primary" type="submit">Salvar</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
